<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>修改密码</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			html,body,.mui-content{
				background-color: #FFFFFF;
				font-size: 14px;
				color: #696969;
			}
			.left{
				float: left;
			}
			.right{
				float: right;
			}
			.clean{
				clear: both;
			}
			.mui-content{
				padding: 20px 18px;
			}
			.mui-input-row:after{
			    position: absolute;
			    right: 0;
			    bottom: 0;
			    left: 0;
			    height: 1px;
			    content: '';
			    -webkit-transform: scaleY(.5);
			    transform: scaleY(.5);
			    background-color: #c8c7cc;
			}
			.mui-input-row input{
				color: #696969;
				font-size: 12.0px;
				border: 0;
				margin-bottom: 0px;
				padding: 10px 20px;
			}
			.mui-btn.mui-btn-red{
				margin: 30px auto;
				width: 100%;
			}
			.mui-btn-red {
			    border: 1px solid #36ccab;
			    background-color: #36ccab;
			}
			.mui-btn-red:enabled:active{
				border: 1px solid #36ccab;
				background:#36ccab;
			}
		</style>
	</head>

	<body>
		<div id="vueModifyPas">
			<div class="mui-content">
				<div>
				    <div class="mui-input-row">
				   		<input v-model="prePassword" type="password" class="mui-input-password" placeholder="请输入新密码">
				    </div>
				    <div class="mui-input-row">
				        <input v-model="nextPassword" type="password" class="mui-input-password" placeholder="请输入新密码">
				    </div>
				</div>
				<div class="mui-button-row">
					<button @click="passward" type="button" class="mui-btn mui-btn-red">保存</button>
				</div>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/vue.min.js" ></script>
		<script type="text/javascript" src="../../js/comm.js" ></script>
		<script type="text/javascript">
			var vm = new Vue({
				el: '#vueModifyPas',
				data: {
					prePassword:'',
					nextPassword:''
				},
				mounted: function() {
					var self = this;
				},
				methods: {
					passward: function() {
						var self = this;
						if(self.prePassword == self.nextPassword){
							mui.rAjax({
								url:'/ajax.php?act=changePassword',
								data:{
									password: self.nextPassword
								},
								dataType:'json',//服务器返回json格式数据
								type:'POST',//HTTP请求类型
								timeout:10000,//超时时间设置为10秒；
								success:function(data){
									//服务器返回响应，根据响应结果，分析是否登录成功；
									console.log(data);
									if(data.responseCode == 0){
										window.location.href = "./loginIn.html";
									}else if(data.responseCode == 1){
										mui.toast(data.responseMsg)
									}else if(data.responseCode == 2){
										mui.toast(data.responseMsg)
									}else if(data.responseCode == 3){
										mui.toast(data.responseMsg)
									}else if(data.responseCode == 4){
										mui.toast(data.responseMsg)
									}
	//								alert(JSON.stringify(data))
								},
								error:function(xhr,type,errorThrown){
									//异常处理；
									console.log(type);
								}
							});
						}else{
							mui.toast("两次密码不一致,请重新输入")
						}
						
					}
				}
			})
		</script>
	</body>

</html>