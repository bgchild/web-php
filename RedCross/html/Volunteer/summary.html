<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">	
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<script>
			!function(){function a(){document.documentElement.style.fontSize=document.documentElement.clientWidth/7.5+"px"}var b=null;window.addEventListener("resize",function(){clearTimeout(b),b=setTimeout(a,10)},!1),a()}(window);
		</script>
		<title>总结</title>
		<style>
			body,html{ 
				height:100%;
				background-color:#FFFFFF;
				color:#000000;
			}
			
			.mui-content{
				background-color:#FFFFFF;
			}
			
			.mui-row{
				padding:30px 15px;
			}
			
			.summary{
				margin-bottom:20px;
				font-size:0.3rem;
				color:#696969;
			}
			textarea{
				font-size: 0.3rem;
				color:#696969;
			}
			.btn{
				margin-top:60px;
				background-color:#36ccab;
				border-radius:5px;
				width:100%;
				height:0.8rem;
				line-height: 0.8rem;
				text-align: center;
				font-size: 0.35rem;
				color:#FFFFFF;
			}
		</style>
	</head>
	<body>
		
		<div id="app">
			<div class="mui-content">
				<div class="mui-row">
					<p class="summary">总结：</p>
					<textarea v-model="sumup" name="because" id="because" cols="30" rows="8"></textarea>
					<div @click="ajaxSuccess" class="btn">确定</div>
				</div>
			</div>	
		</div>
		
		<script type="text/javascript" src="../../js/mui.min.js" ></script>
		<script type="text/javascript" src="../../js/vue.min.js" ></script>
		<script type="text/javascript" src="../../js/comm.js" ></script>
		<script>
			var vm = new Vue({
				el: '#app',
				data: {
					rid: '',
					sumup:""
				},
				mounted: function() {
					var self = this;
					self.rid = GetArgsFromHref(window.location.toString(),"rid");
					console.info(self.rid);
				},
				methods: {
					ajaxSuccess: function(){
						var self = this;
						mui.rAjax({
							url:'/ajax.php?act=sumupActivity',
							data:{
								rid: self.rid,
								sumup:self.sumup
							},
							dataType:'json',//服务器返回json格式数据
							type:'POST',//HTTP请求类型
							timeout:10000,//超时时间设置为10秒；
							success:function(data){
								//服务器返回响应，根据响应结果，分析是否登录成功；
								console.log(data);
								if(data.responseCode == 0){
									mui.toast("ok");
									self.sumup = "";
								}else if(data.responseCode == 1){
									mui.toast(data.responseMsg)
								}else if(data.responseCode == 2){
									mui.toast(data.responseMsg)
								}else if(data.responseCode == 3){
									mui.toast(data.responseMsg)
								}else if(data.responseCode == 4){
									mui.toast(data.responseMsg)
								}else if(data.responseCode == 5){
									mui.toast(data.responseMsg)
								}
//								alert(JSON.stringify(data))
							},
							error:function(xhr,type,errorThrown){
								//异常处理；
								console.log(type);
							}
						});
					}
				}
			})
		</script>
	</body>
</html>
